---
/**
 * Composant: Gallerie
 * Galerie d'images avec layouts adaptatifs
 * Compatible TinaCMS via props
 */

import SmartImage from './SmartImage.astro';

export interface GalleryItem {
  src: string;
  alt: string;
  mod?: 'a' | 'b' | 'c' | 'd';
}

export interface Props {
  subtitle?: string;
  title?: string;
  gallery?: GalleryItem[];
}

const {
  subtitle = "Galerie",
  title = "Quelques photos du projet",
  gallery = [
    { src: "/uploads/imgs/Charpantier.png", alt: "Charpantier", mod: 'a' },
    { src: "/uploads/imgs/maison-build.png", alt: "Maison en construction", mod: 'b' },
    { src: "/uploads/imgs/plan.png", alt: "Plan du projet", mod: 'c' },
    { src: "/uploads/imgs/cie.png", alt: "Compagnie d'électricité", mod: 'd' }
  ]
} = Astro.props;
---

<section class="gallery" aria-labelledby="gallery-title">
  <div class="container gallery__container">
    <header class="gallery__header" style="text-align:center">
      <p class="gallery__subtitle">{subtitle}</p>
      <h2 class="gallery__title" id="gallery-title">{title}</h2>
    </header>

    <ul class="gallery__grid" role="list">
      {gallery.map((item) => (
        <li class="gallery__item" role="listitem">
          <figure class={`gallery__figure gallery__figure--${item.mod || 'a'}`}>
            <SmartImage
              cmsSrc={item.src}
              alt={item.alt}
              width={1200}
              height={900}
              context="galerie"
              loading="lazy"
              class={`gallery__image gallery__image--${item.mod || 'a'}`}
            />
          </figure>
        </li>
      ))}
    </ul>
  </div>
</section>

<style>
/* CSS extrait de wp-content/themes/oveco/style.css (main) */
.gallery {
  width: 100%;
  background: #FFFEF8;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 72px 24px 0;
}
.gallery__container {
  width: 100%;
  max-width: 1219px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 72px;
  margin: 0 auto;
}
.gallery__header {
  width: 100%;
  max-width: 706.82px;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 10px;
  text-align: center;
}
.gallery__subtitle {
  color: #5C6D6F;
  font-size: 19.2px;
  font-family: "Nunito Sans Variable", "Nunito Sans", system-ui, -apple-system, sans-serif;
  font-weight: 700;
  text-transform: uppercase;
  line-height: 20px;
  letter-spacing: 1.92px;
  margin: 0;
}
.gallery__title {
  align-self: stretch;
  color: #334749;
  font-size: 39.81px;
  font-family: "Nunito Sans Variable", "Nunito Sans", system-ui, -apple-system, sans-serif;
  font-weight: 800;
  line-height: 47.77px;
  margin: 0;
}
.gallery__grid {
  width: 100%;
  max-width: 1174px;
  display: flex;
  flex-wrap: wrap;
  gap: 24px;
  justify-content: center;
  align-content: flex-start;
  padding: 0;
  margin: 0;
  list-style: none;
}
.gallery__item { list-style: none; }
.gallery__figure { width: 539px; margin: 0; position: relative; overflow: hidden; }
.gallery__figure.wp-block-image, .gallery .wp-block-image.gallery__figure { width: 539px; margin: 0; overflow: hidden; }
.gallery__figure--a { height: 359px; border-radius: 12px; }
.gallery__figure--b { height: 383px; border-radius: 24px; }
.gallery__figure--c { height: 301px; border-radius: 24px; }
.gallery__figure--d { height: 381px; border-radius: 24px; }
.gallery__figure--b, .gallery__figure--d { margin-top: 16px; }
.gallery__figure--a::after { content: ""; position: absolute; inset: 0; background: rgba(2, 139, 154, 0.05); pointer-events: none; }
.gallery__image { width: 100%; height: 100%; display: block; object-fit: cover; }
@media (max-width: 1200px) { .gallery__figure { width: min(100%, 539px); } }
@media (max-width: 768px) {
  .gallery { padding: 48px 16px 0; }
  .gallery__grid { gap: 16px; justify-content: center; }
  .gallery__figure { width: min(100%, 539px); margin-inline: auto; height: auto; }
  .gallery__figure--a { aspect-ratio: 539/359; }
  .gallery__figure--b { aspect-ratio: 539/383; }
  .gallery__figure--c { aspect-ratio: 539/301; }
  .gallery__figure--d { aspect-ratio: 539/381; }
}
</style>
