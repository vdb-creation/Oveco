---
/**
 * Card Component - Oveco
 * Carte projet/article réutilisable avec image, type, client et titre
 * Harmonisée avec le design des cartes de témoignages
 * 
 * @component
 * @tinacms Utilisé dans Projects et autres sections
 */

export interface Props {
  image: string;
  type?: string;
  client?: string;
  title: string;
  url: string;
  description?: string;
  competences?: string; // Compétences séparées par virgule pour le filtrage
}

const { image, type, client, title, url, description, competences = '' } = Astro.props;

// Image de fond avec fallback
const bgImage = image || '/uploads/default-placeholder.png';
---

<article 
  class="projects__card"
  role="listitem"
  style={`background-image: url('${bgImage}');`}
  data-project-title={title.toLowerCase()}
  data-project-type={(type || '').toLowerCase()}
  data-project-client={(client || '').toLowerCase()}
  data-project-description={(description || '').toLowerCase()}
  data-competences={competences.toLowerCase()}
>
  <div class="projects__card-overlay" aria-hidden="true"></div>

  <!-- Header: Type en haut à droite -->
  {type && (
    <div class="projects__card-header">
      <span class="projects__card-type">{type}</span>
    </div>
  )}

  <!-- Contenu principal -->
  <div class="projects__card-content">
    <div class="projects__card-info">
      {client && (
        <p class="projects__card-client">{client}</p>
      )}
      
      <h2 class="projects__card-title">{title}</h2>
      
      {description && (
        <p class="projects__card-description">{description}</p>
      )}
    </div>
  </div>

  <!-- Footer: Lien vers le projet -->
  <footer class="projects__card-footer">
    <a 
      href={url} 
      class="projects__card-link"
      aria-label={`Voir le projet ${title}`}
    >
      <span>Voir le projet</span>
      <svg 
        class="projects__card-arrow" 
        width="10" 
        height="9" 
        viewBox="0 0 10 9" 
        fill="none" 
        xmlns="http://www.w3.org/2000/svg" 
        aria-hidden="true"
      >
        <path 
          d="M1 4.5H9M9 4.5L5.5 1M9 4.5L5.5 8" 
          stroke="#048B9A" 
          stroke-width="1.5" 
          stroke-linecap="round" 
          stroke-linejoin="round"
        />
      </svg>
    </a>
  </footer>
</article>

<style>
/* Les styles des cartes sont définis dans Projects.astro */
/* Classes utilisées :
 * - .projects__card (388x548px, background-image, border-radius, padding)
 * - .projects__card-overlay (gradient overlay avec backdrop-filter)
 * - .projects__card-header (position: absolute, top-right)
 * - .projects__card-type (texte blanc, uppercase, text-shadow)
 * - .projects__card-content (flex column, space-between)
 * - .projects__card-info (flex column, gap)
 * - .projects__card-client (texte blanc semi-transparent, uppercase)
 * - .projects__card-title (texte blanc, font-size 27.65px, bold)
 * - .projects__card-description (texte blanc semi-transparent)
 * - .projects__card-footer (padding-top, inline-flex)
 * - .projects__card-link (flex, gap, text-decoration: none)
 * - .projects__card-arrow (SVG icon, 10x8.57px)
 */
</style>
