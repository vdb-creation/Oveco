---
/**
 * Composant: WorksHero
 * Hero pour la page des réalisations avec grille de fond et 2 images latérales
 * Compatible TinaCMS via props
 */

import SmartImage from './SmartImage.astro';

export interface MediaImage {
  src: string;
  alt: string;
  overlay?: boolean;
}

export interface Props {
  subtitle?: string;
  title?: string;
  description?: string;
  ctaLabel?: string;
  ctaHref?: string;
  mediaLeft?: MediaImage;
  mediaRight?: MediaImage;
  id?: string;
}

const {
  id = "works-hero-title",
  subtitle = "Nos réalisations",
  title = "Des projets qui ont du sens",
  description = "Description courte ipsum dolor sit amet consectetur adipiscing elit tortor eu egestas morbi sem vulputate etiam facilisis pellentesque ut quis.",
  ctaLabel = "Nous contacter",
  ctaHref = "#contact",
  mediaLeft = {
    src: "/uploads/hero/maison-build.png",
    alt: "Maison avec panneaux solaires"
  },
  mediaRight = {
    src: "/uploads/hero/maison-build.png",
    alt: "Chantier de construction",
    overlay: true
  }
} = Astro.props;

// Sécuriser les objets media pour éviter les erreurs null/undefined
const safeMediaLeft = mediaLeft || { src: "/uploads/hero/maison-build.png", alt: "Maison avec panneaux solaires" };
const safeMediaRight = mediaRight || { src: "/uploads/hero/maison-build.png", alt: "Chantier de construction", overlay: true };
---

<section class="works-hero" aria-labelledby={id}>
  <div class="container works-hero__inner">
    <div class="works-hero__side works-hero__side--left" aria-hidden="true">
      <figure class="works-hero__figure">
        <SmartImage cmsSrc={safeMediaLeft.src} alt={safeMediaLeft.alt} loading="lazy" class="works-hero__image" />
      </figure>
    </div>

    <div class="works-hero__content">
      <header class="works-hero__header">
        <p class="works-hero__subtitle">{subtitle}</p>
        <h1 class="works-hero__title" id={id}>{title}</h1>
      </header>
      <p class="works-hero__desc">{description}</p>
      <a href={ctaHref} class="works-hero__cta">{ctaLabel}</a>
    </div>

    <div class="works-hero__side works-hero__side--right" aria-hidden="true">
      <figure class={`works-hero__figure ${safeMediaRight.overlay ? 'works-hero__figure--overlay' : ''}`}>
        <SmartImage cmsSrc={safeMediaRight.src} alt={safeMediaRight.alt} loading="lazy" class="works-hero__image" />
      </figure>
    </div>
  </div>
</section>

<style lang="scss">
  @use '../assets/scss/astro-components' as *;
  @use '../assets/scss/components/_works-hero' as *;
</style>
