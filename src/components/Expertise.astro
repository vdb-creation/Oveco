---
/**
 * Composant: Expertise
 * Section présentant les expertises techniques d'Oveco
 * Compatible TinaCMS via props
 */

export interface ExpertiseCard {
  icon: string;
  alt: string;
  title: string;
  description: string;
}

export interface Props {
  subtitle?: string;
  title?: string;
  description?: string;
  cards?: ExpertiseCard[];
  ctaLabel?: string;
  ctaHref?: string;
}

const {
  subtitle = "Nos expertises",
  title = "Mettre la technique au service de projets humains et durables",
  description = "Chez Oveco, la technique n'est jamais un but en soi, mais un moyen de rendre l'habitat plus autonome, plus confortable et plus durable. Grâce à une expertise de terrain et une veille constante sur les innovations, nous concevons des systèmes sobres, robustes et performants, adaptés à chaque projet.",
  cards = [
    {
      icon: "/uploads/icons/eolienne.png",
      alt: "Icône énergies renouvelables - pompes à chaleur et panneaux solaires",
      title: "Énergies renouvelables",
      description: "Pompes à chaleur, chaudières, panneaux solaires…<br/>Des systèmes performants, bien dimensionnés, pour plus d'autonomie."
    },
    {
      icon: "/uploads/icons/clim.png",
      alt: "Icône confort thermique - systèmes de chauffage et ventilation",
      title: "Confort thermique<br/>& ventilation",
      description: "Chauffage, ventilation, planchers chauffants…<br/>Un confort constant avec une gestion efficace de l'air."
    },
    {
      icon: "/uploads/icons/elec.png",
      alt: "Icône électricité - installation électrique et traitement de l'eau",
      title: "Électricité & traitement de l'eau",
      description: "Électricité, boucles de chaleur, adoucisseurs…<br/>Une gestion durable de vos ressources énergétiques et hydrauliques."
    }
  ],
  ctaLabel = "Découvrir toutes nos expertises",
  ctaHref = "#expertises-details"
} = Astro.props;
---

<section class="expertise-section" id="expertises" aria-labelledby="expertise-title">
  <div class="container">
    <div class="expertise__container">
      <header class="expertise__header">
        <h3 class="expertise__subtitle" aria-label="Section nos expertises">{subtitle}</h3>
        <h2 class="expertise__title" id="expertise-title">{title}</h2>
        <p class="expertise__description" set:html={description} />
      </header>
      
      <div class="expertise__content">
        <div class="expertise__grid" role="list" aria-label="Liste de nos expertises">
          {cards.map((card) => (
            <article class="expertise__card" role="listitem" itemscope itemtype="https://schema.org/Service">
              <img 
                src={card.icon}
                alt={card.alt}
                class="expertise__icon"
                loading="lazy"
                width="168"
                height="168"
              />
              <div class="expertise__card-content">
                <h4 class="expertise__card-title" itemprop="name" set:html={card.title} />
                <p class="expertise__card-description" itemprop="description" set:html={card.description} />
              </div>
            </article>
          ))}
        </div>
        
        <a href={ctaHref} class="expertise__cta" aria-label={`${ctaLabel}`}>
          <span>{ctaLabel}</span>
        </a>
      </div>
    </div>
  </div>
</section>

<style>
.expertise-section {
  align-self: stretch;
  padding: clamp(48px, 8vw, 90px) clamp(16px, 6vw, 109px);
  overflow: hidden;
  background: var(--oveco-white);
}

@media (max-width: 768px) {
  .expertise-section { padding: 60px 2rem; }
}

@media (max-width: 480px) {
  .expertise-section { padding: 40px 1rem; }
}

.expertise__container {
  width: 100%;
  max-width: 1214px;
  margin: 0 auto;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: clamp(30px, 5vw, 72px);
  display: flex;
}

.expertise__header {
  width: min(100%, 706.82px);
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 10px;
  display: flex;
}

.expertise__subtitle {
  text-align: center;
  color: var(--oveco-text);
  font-size: var(--oveco-font-h3);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-bold);
  text-transform: uppercase;
  line-height: var(--oveco-line-tight);
  letter-spacing: var(--oveco-spacing-wide);
  margin: 0;
}

.expertise__title {
  align-self: stretch;
  text-align: center;
  color: var(--oveco-secondary);
  font-size: var(--oveco-font-h2);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-extrabold);
  line-height: var(--oveco-line-normal);
  margin: 0;
}

@media (max-width: 768px) {
  .expertise__title { font-size: clamp(26px, 6vw, 32px); line-height: 1.2; }
}

.expertise__description {
  align-self: stretch;
  text-align: center;
  color: var(--oveco-text);
  font-size: var(--oveco-font-p);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-regular);
  line-height: var(--oveco-line-extra-loose);
  margin: 0;
}

.expertise__content {
  align-self: stretch;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 42px;
  display: flex;
}

.expertise__grid {
  align-self: stretch;
  justify-content: center;
  align-items: flex-start;
  gap: clamp(20px, 5vw, 61px);
  display: flex;
  flex-wrap: wrap;
}

@media (max-width: 768px) {
  .expertise__grid {
    flex-direction: column;
    align-items: center;
    gap: 40px;
  }
}

.expertise__card {
  flex: 1 1 300px;
  max-width: 364px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 24px;
  display: flex;
}

@media (max-width: 768px) {
  .expertise__card { width: 100%; max-width: 500px; }
}

.expertise__icon {
  width: 168px;
  height: 168px;
  margin: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  object-fit: contain;
  mix-blend-mode: multiply;
}

@media (max-width: 768px) {
  .expertise__icon { width: 140px; height: 140px; }
}

@media (max-width: 480px) {
  .expertise__icon { width: 120px; height: 120px; }
}

.expertise__card-content {
  flex-direction: column;
  justify-content: flex-start;
  align-items: center;
  gap: 8px;
  display: flex;
}

.expertise__card-title {
  width: 324px;
  text-align: center;
  color: var(--oveco-secondary);
  font-size: var(--oveco-font-h4);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-extrabold);
  line-height: 1.1;
  margin: 0;
}

@media (max-width: 768px) {
  .expertise__card-title { width: 100%; font-size: clamp(20px, 5vw, 24px); }
}

.expertise__card-description {
  width: 364px;
  text-align: center;
  color: var(--oveco-text);
  font-size: var(--oveco-font-p);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-regular);
  line-height: var(--oveco-line-extra-loose);
  margin: 0;
}

@media (max-width: 768px) {
  .expertise__card-description { width: 100%; font-size: clamp(14px, 3vw, 15px); }
}

.expertise__cta {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 18px 30px;
  background: var(--oveco-secondary);
  border-radius: var(--oveco-radius-button);
  color: var(--oveco-white);
  font-size: var(--oveco-font-h3);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-bold);
  line-height: 1.2;
  text-align: center;
  border: none;
  text-decoration: none;
  cursor: pointer;
  transition: all var(--oveco-transition-normal);
}

.expertise__cta:hover {
  background: #2a3a3c;
  transform: translateY(-2px);
  box-shadow: var(--oveco-shadow-medium);
}

.expertise__cta:focus {
  outline: 2px solid var(--oveco-accent);
  outline-offset: 2px;
}

@media (max-width: 768px) {
  .expertise__cta { padding: 16px 28px; font-size: 17px; }
}

@media (max-width: 480px) {
  .expertise__cta {
    padding: 14px 24px;
    font-size: 16px;
    width: 100%;
    max-width: 280px;
  }
}

@media (prefers-reduced-motion: reduce) {
  .expertise__cta {
    transition: none !important;
  }
  .expertise__cta:hover {
    transform: none !important;
  }
}
</style>
