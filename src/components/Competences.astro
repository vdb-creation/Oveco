---
/**
 * Composant: Competences
 * Grille de compétences avec icônes et liens
 * Compatible TinaCMS via props
 */

export interface Competence {
  image: string;
  title: string;
  url?: string;
  description?: string;
}

export interface Props {
  subtitle?: string;
  title?: string;
  description?: string;
  competences?: Competence[];
}

const {
  subtitle = "Nom du client",
  title = "Titre narratif",
  description,
  competences = [
    {
      image: "/uploads/icons/clim.png",
      title: "Compétence 1",
      url: "/expertise#clim"
    },
    {
      image: "/uploads/icons/eolienne.png",
      title: "Compétence 2",
      url: "/expertise#eolienne"
    },
    {
      image: "/uploads/icons/elec.png",
      title: "Compétence 3",
      url: "/expertise#electricite"
    },
    {
      image: "/uploads/icons/personne.png",
      title: "Compétence 4",
      url: "/expertise#accompagnement"
    }
  ]
} = Astro.props;
---

<section class="competences" aria-labelledby="competences-title">
  <div class="container competences__container">
    <header class="competences__header">
      <p class="competences__subtitle">{subtitle}</p>
      <h2 class="competences__title" id="competences-title">{title}</h2>
      {description && <p class="competences__description">{description}</p>}
    </header>

    <ul class="competences__grid" role="list">
      {competences.map((c) => (
        <li class="competences__item" role="listitem">
          <figure class="competences__figure">
            <img 
              class="competences__image" 
              src={c.image} 
              alt={c.title} 
              width="168" 
              height="168" 
              loading="lazy"
            />
            <figcaption class="visually-hidden">{c.title}</figcaption>
          </figure>
          <div class="competences__body">
            <h3 class="competences__name">{c.title}</h3>
            {c.description ? (
              <p class="competences__description-item">{c.description}</p>
            ) : (
              <a 
                class="competences__link" 
                href={c.url || '#'} 
                aria-label={`En savoir plus sur ${c.title}`}
              >
                <span>En savoir plus</span>
              </a>
            )}
          </div>
        </li>
      ))}
    </ul>
  </div>
</section>

<style lang="scss">
  @use '../assets/scss/astro-components' as *;
  @use '../assets/scss/components/_competences' as *;
</style>
