---
/**
 * Composant: Certifications
 * Section de certifications avec cartes numérotées
 * Compatible TinaCMS via props
 */

export interface CertificationCard {
  image?: string;
  alt?: string;
}

export interface Props {
  title?: string;
  description?: string;
  cards?: CertificationCard[];
}

const {
  title = "Des certifications à l'échelle européenne",
  description = "Notre savoir-faire est reconnu à l'échelle belge et européenne.<br>Nos projets respectent les normes en vigueur (PEB, RGIE…) et s'inscrivent dans une logique de transition énergétique cohérente, mesurable et durable.",
  cards = [{}, {}, {}] // 3 cartes par défaut
} = Astro.props;
---

<section class="certifications-section" id="certifications" aria-labelledby="certifications-title">
  <div class="certifications">
    <div class="certifications__container">
      <header class="certifications__header">
        <div class="certifications__header-content">
          <h2 class="certifications__title" id="certifications-title" set:html={title} />
          <p class="certifications__description" set:html={description} />
        </div>
      </header>

      <div class="certifications__row" role="list">
        {cards.map((card, index) => (
          <article class="certifications__card" role="listitem" aria-label={`Certification ${index + 1}`}>
            <div class="certifications__card-bg" aria-hidden="true"></div>

            <div class="certifications__icon-wrap">
              {card.image ? (
                <img 
                  src={card.image} 
                  alt={card.alt || `Certification ${index + 1}`} 
                  loading="lazy" 
                  class="certifications__icon-img" 
                />
              ) : (
                <span class="certifications__icon" aria-hidden="true"></span>
              )}
            </div>

            <p class="certifications__number">{index + 1}</p>
          </article>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
.certifications-section {
  align-self: stretch;
  background: var(--oveco-white);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: clamp(48px, 8vw, 120px) clamp(16px, 8vw, 199px);
}

@media (max-width: 768px) {
  .certifications-section {
    padding: 60px 2rem;
  }
}

@media (max-width: 480px) {
  .certifications-section {
    padding: 50px 1rem;
  }
}

.certifications__container {
  display: flex;
  flex-direction: column;
  gap: 34px;
  align-items: center;
}

.certifications__header-content {
  width: 613.67px;
  max-width: 100%;
  display: flex;
  flex-direction: column;
  gap: 12px;
  align-items: center;
  text-align: center;
}

.certifications__title {
  color: var(--oveco-secondary);
  font-size: var(--oveco-font-h2);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-extrabold);
  line-height: var(--oveco-line-normal);
  margin: 0;
}

.certifications__description {
  color: var(--oveco-text);
  font-size: var(--oveco-font-p);
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-regular);
  line-height: var(--oveco-line-extra-loose);
  margin: 0;
}

.certifications__row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(240px, 287px));
  gap: clamp(12px, 2.5vw, 21px);
  justify-content: center;
  width: 100%;
}

@media (max-width: 480px) {
  .certifications__row {
    display: flex;
    align-items: stretch;
    overflow-x: auto;
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
    gap: 14px;
    padding-bottom: 6px;
    scrollbar-width: none;
    -ms-overflow-style: none;
  }
  
  .certifications__row::-webkit-scrollbar {
    display: none;
    width: 0;
    height: 0;
  }
}

.certifications__card {
  width: 287px;
  height: 161px;
  position: relative;
  border-radius: 24px;
  flex: 0 0 auto;
  z-index: 0;
}

@media (max-width: 480px) {
  .certifications__card {
    width: 80%;
    min-width: 260px;
  }
}

.certifications__card-bg {
  position: absolute;
  inset: 0;
  background: var(--oveco-white);
  border-radius: 24px;
  border: 1px solid var(--oveco-text);
  z-index: 1;
}

.certifications__icon-wrap {
  position: absolute;
  width: 72px;
  height: 72px;
  left: 50%;
  top: 24px;
  transform: translateX(-50%);
  background: var(--oveco-white);
  border-radius: 20px;
  border: 1px solid var(--oveco-text);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
  overflow: hidden;
}

.certifications__icon {
  width: 32px;
  height: 28.2px;
  background: var(--oveco-text);
  display: block;
}

.certifications__icon-img {
  width: 100% !important;
  height: 100% !important;
  margin: 0 !important;
  display: block;
  border-radius: 16px;
  object-fit: contain;
}

.certifications__number {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  bottom: 14px;
  width: 80%;
  text-align: center;
  color: var(--oveco-secondary);
  font-size: 28px;
  font-family: var(--oveco-font-family);
  font-weight: var(--oveco-weight-bold);
  line-height: 1.35;
  margin: 0;
  z-index: 3;
}
</style>
