---
/**
 * Composant: Stats
 * Affichage de statistiques en grille
 * Compatible TinaCMS via props
 */

export interface StatItem {
  value: string;
  label: string;
  description?: string;
}

export interface Props {
  stats?: StatItem[];
  title?: string;
  sectionIndex?: number;
}

const {
  title = "Statistiques du projet",
  stats = [
    {
      value: "+ de 45",
      label: "panneaux solaires",
      description: "Lorem ipsum dolor sit amet consectetur adipiscing elit semper dalar elementum tempus hac tellus libero"
    },
    {
      value: "+ de 30",
      label: "éoliennes",
      description: "Lorem ipsum dolor sit amet consectetur adipiscing elit semper dalar elementum tempus hac tellus libero"
    },
    {
      value: "+ de 60",
      label: "batteries de stockage",
      description: "Lorem ipsum dolor sit amet consectetur adipiscing elit semper dalar elementum tempus hac tellus libero"
    }
  ],
  sectionIndex = 0
} = Astro.props;
---

<section class="stats" aria-labelledby="stats-title">
  <div class="container stats__container">
    {title && <h2 id="stats-title" class="stats__title" data-bind={`sections.${sectionIndex}.title`}>{title}</h2>}

    <ul class="stats__grid" role="list">
      {stats.map((stat, index) => (
        <li class="stats__item" role="listitem">
          <div class="stats__content">
            <h1 class="stats__value" data-bind={`sections.${sectionIndex}.stats.${index}.value`}>{stat.value}</h1>
            <h3 class="stats__label" data-bind={`sections.${sectionIndex}.stats.${index}.label`}>{stat.label}</h3>
            {stat.description && <p class="stats__desc" data-bind={`sections.${sectionIndex}.stats.${index}.description`}>{stat.description}</p>}
          </div>
        </li>
      ))}
    </ul>
  </div>
</section>

<style>
/* CSS extrait de wp-content/themes/oveco/style.css (stats section) */
.stats {
  width: 100%;
  background: #FFFEF8;
  display: flex;
  justify-content: center;
  padding: 42px 24px;
}

.stats__container {
  width: 100%;
  max-width: 1219px;
}

.stats__title {
  text-align: center;
  color: #334749;
  font-size: 39.81px;
  font-family: "Nunito Sans Variable", "Nunito Sans", system-ui, -apple-system, sans-serif;
  font-weight: 800;
  line-height: 47.77px;
  margin: 0 0 48px 0;
}

@media (max-width: 768px) {
  .stats__title {
    font-size: 32px;
    line-height: 38px;
    margin-bottom: 32px;
  }
}

.stats__grid {
  width: 100%;
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: clamp(32px, 5vw, 61px);
  list-style: none;
  padding: 0;
  margin: 0;
  justify-items: center;
}

.stats__item {
  width: 100%;
  max-width: 364px;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(16px, 3vw, 24px);
}

.stats__content {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: clamp(6px, 1vw, 8px);
}

.stats__value {
  width: 100%;
  max-width: 324px;
  text-align: center;
  color: #5C6D6F;
  font-size: clamp(32px, 5vw, 47.78px);
  font-family: "Nunito Sans Variable", "Nunito Sans", system-ui, -apple-system, sans-serif;
  font-weight: 800;
  line-height: clamp(38px, 6vw, 57.34px);
  margin: 0;
}

.stats__label {
  width: 100%;
  max-width: 324px;
  text-align: center;
  color: #334749;
  font-size: clamp(20px, 3vw, 27.65px);
  font-family: "Nunito Sans Variable", "Nunito Sans", system-ui, -apple-system, sans-serif;
  font-weight: 700;
  line-height: clamp(24px, 3.5vw, 30.42px);
  margin: 0;
}

.stats__desc {
  width: 100%;
  max-width: 364px;
  text-align: center;
  color: #5C6D6F;
  font-size: clamp(14px, 2vw, 16px);
  font-family: "Nunito Sans Variable", "Nunito Sans", system-ui, -apple-system, sans-serif;
  font-weight: 400;
  line-height: clamp(20px, 3vw, 28.8px);
  margin: 0;
}

/* Responsive amélioré */
@media (max-width: 1200px) {
  .stats__grid {
    grid-template-columns: repeat(2, 1fr);
    gap: clamp(24px, 4vw, 40px);
  }
}

@media (max-width: 768px) {
  .stats {
    padding: clamp(24px, 4vw, 32px) clamp(16px, 3vw, 24px);
  }
  
  .stats__grid {
    grid-template-columns: 1fr;
    gap: clamp(20px, 3vw, 28px);
  }
  
  .stats__item {
    width: 100%;
    max-width: 100%;
  }
  
  .stats__value,
  .stats__label,
  .stats__desc {
    width: 100%;
    max-width: 100%;
  }
}

@media (max-width: 480px) {
  .stats__title {
    font-size: clamp(24px, 5vw, 32px);
    line-height: clamp(28px, 6vw, 38px);
    margin-bottom: clamp(20px, 4vw, 32px);
  }
  
  .stats__item {
    gap: clamp(12px, 2.5vw, 20px);
  }
}
</style>
