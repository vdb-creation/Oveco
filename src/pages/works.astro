---
import Layout from '../layouts/Layout.astro';
import Nabar from '../components/Nabar.astro';
import WorksHero from '../components/WorksHero.astro';
import Projects from '../components/Projects.astro';
import Contact from '../components/Contact.astro';
import Footer from '../components/Footer.astro';
import { getAllProjects, projectToCard } from '../lib/projects.ts';

// Charger tous les projets
const allProjects = await getAllProjects();
const projectCards = allProjects.map(projectToCard);

// Données pour le hero
const heroData = {
  subtitle: "Nos réalisations",
  title: "Des projets qui ont du sens",
  description: "Explorez une sélection de réalisations menées avec nos clients. Chaque projet témoigne de notre engagement pour l'excellence et l'innovation.",
  ctaLabel: "Nous contacter",
  ctaUrl: "#contact"
};

// Titre et description SEO
const pageTitle = "Nos Réalisations - Projets Oveco";
const pageDescription = "Découvrez tous nos projets d'auto-construction et de rénovation écologique. Maisons passives, énergies renouvelables et solutions durables.";
---

<Layout title={pageTitle} description={pageDescription}>
  <!-- Navigation -->
  <Nabar />

  <!-- Hero Section -->
  <WorksHero 
    subtitle={heroData.subtitle}
    title={heroData.title}
    description={heroData.description}
    ctaLabel={heroData.ctaLabel}
    ctaHref={heroData.ctaUrl}
    mediaLeft={{ src: "/uploads/hero/maison-build.png", alt: "Projets de construction" }}
    mediaRight={{ src: "/uploads/hero/maison-build.png", alt: "Réalisations Oveco" }}
  />

  <!-- Section Projets -->
  <Projects 
    subtitle="Portfolio"
    title="Tous nos Projets"
    description="Découvrez l'ensemble de nos réalisations, de la conception à la livraison."
    linkText="Voir le projet"
    linkUrl="/work"
    cards={projectCards}
  />

  <!-- Contact -->
  <Contact />

  <!-- Footer -->
  <Footer 
    copyrightYear={new Date().getFullYear()}
    companyName="Oveco"
    legalText="Tous droits réservés"
  />
</Layout>

<style>
/* Styles spécifiques à la page works */
.works-page {
  /* La page utilise les styles globaux des composants */
}

/* Ajustements pour la page works si nécessaire */
.works-hero {
  background-image: url("/src/assets/imgs/BgGrille.svg");
}

/* Responsive pour la page works */
@media (max-width: 768px) {
  .works-page {
    /* Ajustements mobile si nécessaire */
  }
}
</style>